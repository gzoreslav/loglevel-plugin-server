!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("loglevel-plugin-server",[],t):"object"==typeof exports?exports["loglevel-plugin-server"]=t():e["loglevel-plugin-server"]=t()}(this,function(){return function(e){function t(r){if(o[r])return o[r].exports;var n=o[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var o={};return t.m=e,t.c=o,t.d=function(e,o,r){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.defaultJSONFormat=function(e){var t=e.message,o=e.methodName,r=e.logLevel,n=e.loggerName;return JSON.stringify({message:t,level:{label:(o||"").toUpperCase(),value:r},logger:n||"",timestamp:(new Date).toISOString()})};t.default=function(e,t){if(!e||!e.methodFactory)throw new Error("loglevel instance has to be specified in order to be extended");var o=e,n=t&&t.url||"http://localhost:8080/log",l=t&&t.callOriginal||!1,a=t&&t.level||"trace",u=t&&t.format||r,i=o.methodFactory,s=[],c=!1;o.methodFactory=function(e,t,o){var r=i(e,t,o);return function(n){var a=u({message:n,methodName:e,logLevel:t,loggerName:o});l&&r(n),s.push(a),f()}},o.setLevel(a);var f=function e(){if(!s.length||c)return null;c=!0;var t=s.shift(),o=new XMLHttpRequest;o.open("POST",n,!0),o.setRequestHeader("Content-Type","application/json"),o.onreadystatechange=function(){4===o.readyState&&(c=!1,setTimeout(e,0))},o.send(t)}}}])});